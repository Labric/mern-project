{"version":3,"sources":["components/AppContext.js","components/LeftNav.js","actions/post.actions.js","components/utils.js","components/Posts/NewPostForm.js","actions/user.actions.js","components/Profil/FollowHandler.js","components/Posts/EditDeleteComment.js","components/Posts/CardComments.js","components/Posts/DeleteCard.js","components/Posts/LikeButton.js","components/Posts/Card.js","components/Thread.js","components/log/SignInForm.js","components/log/SignUpForm.js","components/log/index.js","components/Trends.js","components/Profil/FriendsHint.js","pages/Home.js","components/Profil/UploadImg.js","components/Profil/UpdateProfil.js","components/Profil/ShowProfil.js","pages/Profil.js","pages/Trending.js","components/log/logout.js","components/Navbar.js","components/routes/index.js","App.js","reducers/user.reducer.js","actions/users.actions.js","reducers/users.reducer.js","reducers/post.reducer.js","reducers/error.reducer.js","reducers/allPosts.reducer.js","reducers/trending.reducer.js","reducers/index.js","index.js"],"names":["UidContext","createContext","LeftNav","className","to","exact","activeClassName","src","alt","GET_POSTS","GET_ALL_POSTS","LIKE_POST","UNLIKE_POST","UPDATE_POST","DELETE_POST","EDIT_COMMENT","DELETE_COMMENT","GET_TRENDS","GET_POST_ERRORS","getPosts","num","dispatch","axios","get","process","then","res","array","data","slice","type","payload","catch","err","console","log","addPost","post","errors","dateParser","timestamp","Date","parse","toLocaleDateString","hour","minute","second","weekday","year","month","day","toString","isEmpty","value","undefined","Object","keys","length","trim","timestampParser","NewPostForm","useDispatch","useState","isLoading","setIsLoading","message","setMessage","postPicture","setPostPicture","video","setVideo","file","setFile","userData","useSelector","state","userReducer","error","errorReducer","postError","handlePost","a","FormData","append","_id","cancelPost","alert","useEffect","findLink","split","i","includes","embed","replace","splice","join","handleVideo","following","followers","picture","name","id","placeholder","onChange","e","target","pseudo","now","frameBorder","allow","allowFullScreen","title","accept","URL","createObjectURL","files","handlePicture","onClick","format","maxSize","GET_USER","UPLOAD_PICTURE","UPDATE_BIO","FOLLOW_USER","UNFOLLOW_USER","GET_USER_ERRORS","FollowHandler","idToFollow","isFollowed","setIsFollowed","followerId","idToUnfollow","method","url","followUser","EditDeleteComment","comment","postId","isAuthor","setIsAuthor","edit","setEdit","text","setText","uid","useContext","handleDelete","commentId","deleteComment","commenterId","action","onSubmit","preventDefault","editComment","htmlFor","defaultValue","window","confirm","CardComments","usersData","usersReducer","comments","map","user","commenterPseudo","addComment","DeleteCard","props","deleteQuote","LikeButton","liked","setLiked","likers","trigger","position","closeOnDocumentClick","userId","Card","isUpdated","setIsUpdated","textUpdate","setTextUpdate","showComments","setShowComments","posterId","createdAt","width","height","Thread","loadPost","setLoadPost","count","setCount","posts","postReducer","loadMore","innerHeight","document","documentElement","scrollTop","scrollingElement","scrollHeight","addEventListener","removeEventListener","SignInForm","email","setEmail","password","setPassword","emailError","querySelector","passwordError","withCredentials","innerHTML","location","SignUpForm","formSubmit","setFormSubmit","setPseudo","controlPassword","setControlPassword","handleRegister","terms","getElementById","pseudoError","controlPasswordError","termsError","checked","href","rel","Log","signup","signUpModal","setSignUpModal","signin","signInModal","setSignInModal","handleModals","Trends","allPostsReducer","trendList","trendingReducer","sortedArray","sort","b","getTrends","FriendsHint","playOnce","setPlayOnce","friendsHint","setFriendsHint","push","Math","random","notFriendList","Home","UploadImg","uploadPicture","UpdateProfil","bio","setBio","updateForm","setUpdateForm","userError","followingPopup","setFollowingPopup","followersPopup","setFollowersPopup","updateBio","ShowProfil","Profil","Trending","logout","key","cookie","remove","expire","Navbar","index","path","component","App","setUid","fetchToken","getUser","Provider","initialState","GET_USERS","combineReducers","filter","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","logger","ReactDOM","render"],"mappings":"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","file":"static/js/main.28f10fee.chunk.js","sourcesContent":["import { createContext } from 'react'\r\n\r\nexport const UidContext = createContext();","import React from 'react';\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst LeftNav = () => {\r\n    return (\r\n        <div className=\"left-nav-container\">\r\n            <div className=\"icons\">\r\n                <div className=\"icons-bis\">\r\n                    <NavLink to=\"/\" exact activeClassName=\"active-left-nav\">\r\n                        <img src=\"./img/icons/home.svg\" alt=\"icon home\" />\r\n                    </NavLink>\r\n                    <br />\r\n                    <NavLink to=\"/trending\" exact activeClassName=\"active-left-nav\">\r\n                        <img src=\"./img/icons/rocket.svg\" alt=\"icon rocket\" />\r\n                    </NavLink>\r\n                    <br />\r\n                    <NavLink to=\"/profil\" exact activeClassName=\"active-left-nav\">\r\n                        <img src=\"./img/icons/user.svg\" alt=\"icon user\" />\r\n                    </NavLink>\r\n                    <br />\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LeftNav;","import axios from \"axios\";\r\n\r\n// posts\r\nexport const GET_POSTS = \"GET_POSTS\";\r\nexport const GET_ALL_POSTS = \"GET_ALL_POSTS\";\r\nexport const ADD_POST = \"ADD_POST\"\r\nexport const LIKE_POST = \"LIKE_POST\";\r\nexport const UNLIKE_POST = \"UNLIKE_POST\";\r\nexport const UPDATE_POST = \"UPDATE_POST\";\r\nexport const DELETE_POST = \"DELETE_POST\";\r\n\r\n// comments\r\nexport const ADD_COMMENT = \"ADD_COMMENT\"\r\nexport const EDIT_COMMENT = \"EDIT_COMMENT\"\r\nexport const DELETE_COMMENT = \"DELETE_COMMENT\"\r\n\r\n// trends\r\nexport const GET_TRENDS = \"GET_TRENDS\"\r\n\r\n// errors\r\nexport const GET_POST_ERRORS = \"GET_POST_ERRORS\"\r\n\r\n\r\nexport const getPosts = (num) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .get(`${process.env.REACT_APP_API_URL}api/post`)\r\n      .then((res) => {\r\n        const array = res.data.slice(0, num);\r\n        dispatch({ type: GET_POSTS, payload: array });\r\n        dispatch({ type: GET_ALL_POSTS, payload: res.data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const addPost = (data) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .post(`${process.env.REACT_APP_API_URL}api/post`, data)\r\n      .then((res) => {\r\n        if(res.data.errors) {\r\n          dispatch({ type: GET_POST_ERRORS, payload: res.data.errors})\r\n        } else {\r\n          dispatch({type: GET_POST_ERRORS, payload: ''})\r\n        }\r\n      }\r\n      )\r\n  };\r\n}\r\n\r\nexport const likePost = (postId, userId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/like-post/` + postId,\r\n      data: { id: userId },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: LIKE_POST, payload: { postId, userId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const unlikePost = (postId, userId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/unlike-post/` + postId,\r\n      data: { id: userId },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UNLIKE_POST, payload: { postId, userId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\n\r\nexport const addComment = (postId, commenterId, text, commenterPseudo) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/comment-post/${postId}`,\r\n      data: { commenterId, text, commenterPseudo },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: ADD_COMMENT, payload: { postId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n}\r\nexport const editComment = (postId, commentId, text) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/edit-comment-post/${postId}`,\r\n      data: { commentId, text},\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: EDIT_COMMENT, payload: { postId, commentId, text } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n}\r\nexport const deleteComment = (postId, commentId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/delete-comment-post/${postId}`,\r\n      data: { commentId },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: DELETE_COMMENT, payload: { postId, commentId} });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n}\r\n\r\n\r\nexport const updatePost = (postId, message) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"put\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/${postId}`,\r\n      data: { message },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UPDATE_POST, payload: { message, postId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const deletePost = (postId) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"delete\",\r\n      url: `${process.env.REACT_APP_API_URL}api/post/${postId}`,\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: DELETE_POST, payload: { postId } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const getTrends = (sortedArray) => {\r\n  return (dispatch) => {\r\n    dispatch({type: GET_TRENDS, payload: sortedArray})\r\n  }\r\n}","export const dateParser = (num) => {\r\n  let options = {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n    weekday: \"long\",\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  };\r\n  let timestamp = Date.parse(num);\r\n\r\n  let date = new Date(timestamp).toLocaleDateString(\"fr-FR\", options);\r\n  return date.toString();\r\n};\r\n\r\nexport const isEmpty = (value) => {\r\n  return (\r\n    value === undefined ||\r\n    value === null ||\r\n    (typeof value === \"object\" && Object.keys(value).length === 0) ||\r\n    (typeof value === \"string\" && value.trim().length === 0)\r\n  );\r\n};\r\n\r\nexport const timestampParser = (num) => {\r\n  let options = {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n    weekday: \"long\",\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n  };\r\n\r\n  let date = new Date(num).toLocaleDateString(\"fr-FR\", options);\r\n\r\n  return date.toString();\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { addPost, getPosts } from \"../../actions/post.actions\";\r\nimport { isEmpty, timestampParser } from \"../utils\";\r\n\r\nconst NewPostForm = () => {\r\n  const dispatch = useDispatch();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [postPicture, setPostPicture] = useState(null);\r\n  const [video, setVideo] = useState(\"\");\r\n  const [file, setFile] = useState();\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const error = useSelector((state) => state.errorReducer.postError);\r\n\r\n  const handlePicture = (e) => {\r\n    setPostPicture(URL.createObjectURL(e.target.files[0]));\r\n    setFile(e.target.files[0]);\r\n    setVideo(\"\");\r\n  };\r\n  const handlePost = async () => {\r\n    if (message || postPicture || video) {\r\n      const data = new FormData();\r\n      data.append(\"posterId\", userData._id);\r\n      data.append(\"message\", message);\r\n      if (file) data.append(\"file\", file);\r\n      data.append(\"video\", video);\r\n\r\n      await dispatch(addPost(data));\r\n      dispatch(getPosts());\r\n      cancelPost();\r\n    } else {\r\n      alert(\"veuillez entrer un message\");\r\n    }\r\n  };\r\n  const cancelPost = () => {\r\n    setMessage(\"\");\r\n    setPostPicture(\"\");\r\n    setVideo(\"\");\r\n    setFile(\"\");\r\n  };\r\n  const handleVideo = () => {\r\n    let findLink = message.split(\" \");\r\n    for (let i = 0; i < findLink.length; i++) {\r\n      if (\r\n        findLink[i].includes(\"https://www.yout\") ||\r\n        findLink[i].includes(\"https://yout\")\r\n      ) {\r\n        let embed = findLink[i].replace(\"watch?v=\", \"embed/\");\r\n        setVideo(embed.split(\"&\")[0]);\r\n        findLink.splice(i, 1);\r\n        setMessage(findLink.join(\" \"));\r\n        setPostPicture(\"\");\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(userData)) setIsLoading(false);\r\n    handleVideo();\r\n  }, [userData, message, video]);\r\n\r\n  return (\r\n    <div className=\"post-container\">\r\n      {isLoading ? (\r\n        <i className=\"fas fa-spinner fa-pulse\"></i>\r\n      ) : (\r\n        <>\r\n          <div className=\"data\">\r\n            <p>\r\n              <span>{userData.following ? userData.following.length : 0}</span>{\" \"}\r\n              Abonnement\r\n              {userData.following && userData.following.length > 1 ? \"s\" : \"\"}\r\n            </p>\r\n            <p>\r\n              <span>{userData.followers ? userData.followers.length : 0}</span>{\" \"}\r\n              Abonné\r\n              {userData.followers && userData.followers.length > 1 ? \"s\" : \"\"}\r\n            </p>\r\n          </div>\r\n          <NavLink exact to=\"/profil\">\r\n            <div className=\"user-info\">\r\n              <img src={userData.picture} alt=\"user-img\" />\r\n            </div>\r\n          </NavLink>\r\n          <div className=\"post-form\">\r\n            <textarea\r\n              name=\"message\"\r\n              id=\"message\"\r\n              placeholder=\"A quoi pensez-vous ?\"\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              value={message}\r\n            />\r\n            {message || postPicture || video.length > 20 ? (\r\n              <li className=\"card-container\">\r\n                <div className=\"card-left\">\r\n                  <img src={userData.picture} alt=\"user-pic\" />\r\n                </div>\r\n                <div className=\"card-right\">\r\n                  <div className=\"card-header\">\r\n                    <div className=\"pseudo\">\r\n                      <h3>{userData.pseudo}</h3>\r\n                    </div>\r\n                    <span>{timestampParser(Date.now())}</span>\r\n                  </div>\r\n                  <div className=\"content\">\r\n                    <p>{message}</p>\r\n                    <img src={postPicture} alt=\"\" />\r\n                    {video && (\r\n                      <iframe\r\n                        src={video}\r\n                        frameBorder=\"0\"\r\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                        allowFullScreen\r\n                        title=\"video\"\r\n                      ></iframe>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ) : null}\r\n\r\n            <div className=\"footer-form\">\r\n              <div className=\"icon\">\r\n                {isEmpty(video) && (\r\n                  <>\r\n                    <img src=\"./img/icons/picture.svg\" alt=\"svg\" />\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"file-upload\"\r\n                      name=\"file\"\r\n                      accept=\".jpg, .jpeg, .png\"\r\n                      onChange={(e) => handlePicture(e)}\r\n                    />\r\n                  </>\r\n                )}\r\n                {video && (\r\n                  <button onClick={() => setVideo(\"\")}>Supprimer vidéo</button>\r\n                )}\r\n              </div>\r\n              {!isEmpty(error.format) && <p>{error.format}</p>}\r\n              {!isEmpty(error.maxSize) && <p>{error.maxSize}</p>}\r\n              <div className=\"btn-send\">\r\n                {message || postPicture || video.length > 20 ? (\r\n                  <button className=\"cancel\" onClick={cancelPost}>\r\n                    Annuler message\r\n                  </button>\r\n                ) : null}\r\n                <button className=\"send\" onClick={handlePost}>\r\n                  Envoyer\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPostForm;\r\n","import axios from \"axios\";\r\n\r\nexport const GET_USER = \"GET_USER\";\r\nexport const UPLOAD_PICTURE = \"UPLOAD_PICTURE\";\r\nexport const UPDATE_BIO = \"UPDATE_BIO\";\r\nexport const FOLLOW_USER = \"FOLLOW_USER\";\r\nexport const UNFOLLOW_USER = \"UNFOLLOW_USER\";\r\n\r\nexport const GET_USER_ERRORS = \"GET_USER_ERRORS\";\r\n\r\nexport const getUser = (uid) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .get(`${process.env.REACT_APP_API_URL}api/user/${uid}`)\r\n      .then((res) => {\r\n        dispatch({ type: GET_USER, payload: res.data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const uploadPicture = (data, id) => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .post(`${process.env.REACT_APP_API_URL}api/user/upload`, data)\r\n      .then((res) => {\r\n        if (res.data.errors) {\r\n          dispatch({ type: GET_USER_ERRORS, payload: res.data.errors });\r\n        } else {\r\n          dispatch({ type: GET_USER_ERRORS, payload: '' });\r\n          return axios\r\n            .get(`${process.env.REACT_APP_API_URL}api/user/${id}`)\r\n            .then((res) => {\r\n              dispatch({ type: UPLOAD_PICTURE, payload: res.data.picture });\r\n            });\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const updateBio = (userId, bio) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"put\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/` + userId,\r\n      data: { bio },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UPDATE_BIO, payload: bio });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const followUser = (followerId, idToFollow) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/follow/` + followerId,\r\n      data: { idToFollow },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: FOLLOW_USER, payload: { idToFollow } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const unfollowUser = (followerId, idToUnfollow) => {\r\n  return (dispatch) => {\r\n    return axios({\r\n      method: \"patch\",\r\n      url: `${process.env.REACT_APP_API_URL}api/user/unfollow/` + followerId,\r\n      data: { idToUnfollow },\r\n    })\r\n      .then((res) => {\r\n        dispatch({ type: UNFOLLOW_USER, payload: { idToUnfollow } });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { followUser, unfollowUser } from \"../../actions/user.actions\";\r\nimport { isEmpty } from \"../utils\";\r\n\r\nconst FollowHandler = ({ idToFollow, type }) => {\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const [isFollowed, setIsFollowed] = useState(false);\r\n  const dispatch = useDispatch()\r\n  const handleFollow = () => {\r\n    dispatch(followUser(userData._id, idToFollow))\r\n    setIsFollowed(true)\r\n};\r\n\r\n  const handleUnfollow = () => {\r\n      dispatch(unfollowUser(userData._id, idToFollow))\r\n      setIsFollowed(false)\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(userData.following)) {\r\n      if (userData.following.includes(idToFollow)) {\r\n        setIsFollowed(true);\r\n      } else setIsFollowed(false);\r\n    }\r\n  }, [userData, idToFollow]);\r\n\r\n  return (\r\n      <>\r\n      {isFollowed && !isEmpty(userData) && (\r\n        <span onClick={handleUnfollow}>\r\n            {type === \"suggestion\" && <button className=\"unfollow-btn\">Abonné</button>}\r\n            {type === \"card\" && <img src=\"./img/icons/checked.svg\" alt=\"checked\" />}\r\n        </span>\r\n        )}\r\n      {isFollowed === false && !isEmpty(userData) && (\r\n        <span onClick={handleFollow}>\r\n            {type === \"suggestion\" && <button className=\"follow-btn\">Suivre</button>}\r\n            {type === \"card\" && <img src=\"./img/icons/check.svg\" alt=\"check\" />}\r\n        </span>\r\n        )}\r\n      </>\r\n  );\r\n};\r\n\r\nexport default FollowHandler;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { editComment, deleteComment } from \"../../actions/post.actions\";\r\nimport { UidContext } from \"../AppContext\";\r\n\r\nconst EditDeleteComment = ({ comment, postId }) => {\r\n  const [isAuthor, setIsAuthor] = useState(false);\r\n  const [edit, setEdit] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const uid = useContext(UidContext);\r\n  const dispatch = useDispatch();\r\n  \r\n  const handleEdit = (e) => {\r\n    e.preventDefault();\r\n    if (text) {\r\n      dispatch(editComment(postId, comment._id, text));\r\n      setText(\"\");\r\n      setEdit(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n      dispatch(deleteComment(postId, comment._id))\r\n  };\r\n\r\n  useEffect(() => {\r\n    const checkAuthor = () => {\r\n      if (uid === comment.commenterId) {\r\n        setIsAuthor(true);\r\n      }\r\n    };\r\n    checkAuthor();\r\n  }, [uid, comment.commenterId]);\r\n  return (\r\n    <div className=\"edit-comment\">\r\n      {isAuthor && edit === false && (\r\n        <span onClick={() => setEdit(!edit)}>\r\n          <img src=\"./img/icons/edit.svg\" alt=\"edit-comment\" />\r\n        </span>\r\n      )}\r\n      {isAuthor && edit && (\r\n        <form action=\"\" onSubmit={handleEdit} className=\"edit-comment-form\">\r\n          <label htmlFor=\"text\" onClick={() => setEdit(!edit)}>\r\n          &#10005;\r\n          </label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"text\"\r\n            onChange={(e) => setText(e.target.value)}\r\n            defaultValue={comment.text}\r\n          />{\" \"}\r\n          <br />\r\n          <div className=\"btn\">\r\n            <span\r\n              onClick={() => {\r\n                if (window.confirm(\"Voulez-vous supprimer ce commentaire ?\")) {\r\n                  handleDelete();\r\n                }\r\n              }}\r\n            >\r\n              <img src=\"./img/icons/trash.svg\" alt=\"delete\" />\r\n            </span>\r\n          \r\n          <input type=\"submit\" value=\"Valider les modifications\" />\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditDeleteComment;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addComment, getPosts } from \"../../actions/post.actions\";\r\nimport FollowHandler from \"../Profil/FollowHandler\";\r\nimport { isEmpty, timestampParser } from \"../utils\";\r\nimport EditDeleteComment from \"./EditDeleteComment\";\r\n\r\nconst CardComments = ({ post }) => {\r\n  const [text, setText] = useState(\"\");\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleComment = (e) => {\r\n      e.preventDefault()\r\n      if(text) {\r\n        dispatch(addComment(post._id, userData._id, text, userData.pseudo))\r\n        .then(() => dispatch(getPosts()))\r\n        .then(() => setText(''))\r\n      }\r\n  };\r\n  \r\n  return (\r\n    <div>\r\n      {post.comments.map((comment) => {\r\n        return (\r\n          <div\r\n            className={\r\n              comment.commenterId === userData._id\r\n                ? \"comment-container client\"\r\n                : \"comment-container\"\r\n            }\r\n            key={comment._id}\r\n          >\r\n            <div className=\"left-part\">\r\n              <img\r\n                src={\r\n                  !isEmpty(usersData[0]) &&\r\n                  usersData\r\n                    .map((user) => {\r\n                      if (user._id === comment.commenterId) return user.picture;\r\n                      else return null;\r\n                    })\r\n                    .join(\"\")\r\n                }\r\n                alt=\"commenter-pic\"\r\n              />\r\n            </div>\r\n            <div className=\"right-part\">\r\n              <div className=\"comment-header\">\r\n                <div className=\"pseudo\">\r\n                  <h3>{comment.commenterPseudo}</h3>\r\n                  {comment.commenterId !== userData._id && (\r\n                    <FollowHandler\r\n                      idToFollow={comment.commenterId}\r\n                      type={\"card\"}\r\n                    />\r\n                  )}\r\n                </div>\r\n                <span>{timestampParser(comment.timestamp)}</span>\r\n              </div>\r\n              <p>{comment.text}</p>\r\n              <EditDeleteComment comment={comment} postId={post._id}/>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n      {userData._id && (\r\n        <form action=\"\" onSubmit={handleComment} className=\"comment-form\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"text\"\r\n            onChange={(e) => setText(e.target.value)}\r\n            value={text}\r\n            placeholder=\"Laisser un commentaire\"\r\n          />\r\n          <br />\r\n          <input type=\"submit\" value=\"Envoyer\" />\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardComments;\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deletePost } from \"../../actions/post.actions\";\r\n\r\nconst DeleteCard = (props) => {\r\n    const dispatch = useDispatch()\r\n    const deleteQuote = () => dispatch(deletePost(props.id))\r\n    \r\n  return (\r\n    <div\r\n      onClick={() => {\r\n        if (window.confirm(\"Voulez-vous supprimer cet article ?\")) {\r\n          deleteQuote();\r\n        }\r\n      }}\r\n    >\r\n      <img src=\"./img/icons/trash.svg\" alt=\"trash\"/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteCard;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { UidContext } from \"../AppContext\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { likePost, unlikePost } from \"../../actions/post.actions\";\r\n\r\nconst LikeButton = ({ post }) => {\r\n  const [liked, setLiked] = useState(false);\r\n  const uid = useContext(UidContext);\r\n  const dispatch = useDispatch()\r\n\r\n  const like = () => {\r\n        dispatch(likePost(post._id, uid))\r\n        setLiked(true)\r\n  }\r\n  const unlike = () => {\r\n    dispatch(unlikePost(post._id, uid))\r\n    setLiked(false)\r\n  }\r\n  useEffect(() => {\r\n    if (post.likers.includes(uid)) setLiked(true); \r\n    else setLiked(false)\r\n  }, [uid, post.likers, liked]);\r\n\r\n  return (\r\n    <div className=\"like-container\">\r\n      {uid === null && (\r\n        <Popup\r\n          trigger={<img src=\"./img/icons/heart.svg\" alt=\"like\" />}\r\n          position={[\"bottom center\", \"bottom right\", \"bottom left\"]}\r\n          closeOnDocumentClick\r\n        >\r\n          <div>Connectez-vous pour aimer un post! </div>\r\n        </Popup>\r\n      )}\r\n      {uid && liked === false && (\r\n          <img src=\"./img/icons/heart.svg\" onClick={like} alt=\"like\"/>\r\n      )}\r\n      {uid && liked  && (\r\n          <img src=\"./img/icons/heart-filled.svg\" onClick={unlike} alt=\"unlike\"/>\r\n      )}\r\n      <span>{post.likers.length}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LikeButton;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { getPosts, updatePost } from \"../../actions/post.actions\";\r\nimport FollowHandler from \"../Profil/FollowHandler\";\r\nimport { dateParser, isEmpty } from \"../utils\";\r\nimport CardComments from \"./CardComments\";\r\nimport DeleteCard from \"./DeleteCard\";\r\nimport LikeButton from \"./LikeButton\";\r\n\r\nconst Card = ({ post }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isUpdated, setIsUpdated] = useState(false);\r\n  const [textUpdate, setTextUpdate] = useState(null);\r\n  const [showComments, setShowComments] = useState(false);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  const updateItem = () => {\r\n    if (textUpdate) {\r\n      dispatch(updatePost(post._id, textUpdate));\r\n    }\r\n    setIsUpdated(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    !isEmpty(usersData[0]) && setIsLoading(false);\r\n  }, [usersData]);\r\n\r\n  return (\r\n    <li className=\"card-container\" key={post._id}>\r\n      {isLoading ? (\r\n        <i className=\"fas fa-spinner fa-spin\"></i>\r\n      ) : (\r\n        <>\r\n          <div className=\"card-left\">\r\n            <NavLink exact to=\"/profil\">\r\n              <img\r\n                src={\r\n                  !isEmpty(usersData[0]) &&\r\n                  usersData\r\n                    .map((user) => {\r\n                      if (user._id === post.posterId) return user.picture;\r\n                      else return null;\r\n                    })\r\n                    .join(\"\")\r\n                }\r\n                alt=\"user-pic\"\r\n              />\r\n            </NavLink>\r\n          </div>\r\n          <div className=\"card-right\">\r\n            <div className=\"card-header\">\r\n              <div className=\"pseudo\">\r\n                <h3>\r\n                  {!isEmpty(usersData[0]) &&\r\n                    usersData.map((user) => {\r\n                      if (user._id === post.posterId) return user.pseudo;\r\n                      else return null;\r\n                    })}\r\n                </h3>\r\n                {post.posterId !== userData._id && (\r\n                  <FollowHandler idToFollow={post.posterId} type={\"card\"} />\r\n                )}\r\n              </div>\r\n              <span>{dateParser(post.createdAt)}</span>\r\n            </div>\r\n            {isUpdated === false && <p>{post.message}</p>}\r\n            {isUpdated && (\r\n              <div className=\"update-post\">\r\n                <textarea\r\n                  defaultValue={post.message}\r\n                  onChange={(e) => setTextUpdate(e.target.value)}\r\n                />\r\n                <div className=\"button-container\">\r\n                  <button className=\"btn\" onClick={updateItem}>\r\n                    Valider les modif\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {post.picture && (\r\n              <img src={post.picture} alt=\"card-name\" className=\"card-pic\" />\r\n            )}\r\n            {post.video && (\r\n              <iframe\r\n                width=\"500\"\r\n                height=\"300\"\r\n                src={post.video}\r\n                frameBorder=\"0\"\r\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                allowFullScreen\r\n                title={post._id}\r\n              ></iframe>\r\n            )}\r\n            {userData._id === post.posterId && (\r\n              <div className=\"button-container\">\r\n                <div onClick={() => setIsUpdated(!isUpdated)}>\r\n                  <img src=\"./img/icons/edit.svg\" alt=\"edit\" />\r\n                </div>\r\n                <DeleteCard id={post._id} />\r\n              </div>\r\n            )}\r\n            <div className=\"card-footer\">\r\n              <div className=\"comment-icon\">\r\n                <img\r\n                  onClick={() => setShowComments(!showComments)}\r\n                  src=\"./img/icons/message1.svg\"\r\n                  alt=\"comment\"\r\n                />\r\n                <span>{post.comments.length}</span>\r\n              </div>\r\n              <LikeButton post={post} />\r\n              <img src=\"./img/icons/share.svg\" alt=\"share\" />\r\n            </div>\r\n            {showComments && <CardComments post={post} />}\r\n          </div>\r\n        </>\r\n      )}\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getPosts } from \"../actions/post.actions\";\r\nimport Card from \"./Posts/Card\";\r\nimport { isEmpty } from \"./utils\";\r\n\r\n\r\nconst Thread = () => {\r\n  const [loadPost, setLoadPost] = useState(true);\r\n  const [count, setCount] = useState(5)\r\n  const posts = useSelector((state) => state.postReducer);\r\n  const dispatch = useDispatch();\r\n  \r\n  const loadMore = () => {\r\n  if (window.innerHeight + document.documentElement.scrollTop + 1 > document.scrollingElement.scrollHeight) {\r\n    setLoadPost(true)\r\n  }\r\n}\r\n  useEffect(() => {\r\n    if (loadPost) {\r\n      dispatch(getPosts(count));\r\n      setLoadPost(false);\r\n      setCount(count + 5)\r\n    }\r\n    window.addEventListener('scroll', loadMore)\r\n    return () => window.removeEventListener('scroll', loadMore)\r\n  }, [loadPost]);\r\n\r\n  return (\r\n    <div className=\"thread-container\">\r\n      <ul>\r\n        {!isEmpty(posts[0]) &&\r\n          posts.map((post) => {\r\n            return <Card post={post} key={post._id} />;\r\n          })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Thread;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios'\r\n\r\nconst SignInForm = () => {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const handleLogin = (e) => {\r\n        e.preventDefault();\r\n        const emailError = document.querySelector('.email.error')\r\n        const passwordError = document.querySelector('.password.error')\r\n\r\n        axios({\r\n            method: \"post\",\r\n            url: `${process.env.REACT_APP_API_URL}api/user/login`,\r\n            withCredentials: true,\r\n            data: {\r\n                email,\r\n                password\r\n            }\r\n        })\r\n            .then((res) => {\r\n                console.log(res)\r\n                if (res.data.errors) {\r\n                    emailError.innerHTML = res.data.errors.email;\r\n                    passwordError.innerHTML = res.data.errors.password;\r\n                } else {\r\n                    window.location = '/';\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <form action=\"\" onSubmit={handleLogin} id=\"sign-in-form\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <br />\r\n            <input type=\"text\" name=\"email\" id=\"email\" onChange={(e) => setEmail(e.target.value)} value={email} />\r\n            <div className=\"email error\"></div>\r\n            <br />\r\n            <label htmlFor=\"password\">Mot de passe</label>\r\n            <br />\r\n            <input type=\"password\" name=\"password\" id=\"password\" onChange={(e) => setPassword(e.target.value)} value={password} />\r\n            <div className=\"password error\"></div>\r\n            <br />\r\n            <input type=\"submit\" value=\"Se connecter\" />\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default SignInForm;","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport SignInForm from './SignInForm';\r\n\r\n\r\nconst SignUpForm = () => {\r\n    const [formSubmit, setFormSubmit] = useState(false)\r\n    const [pseudo, setPseudo] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [controlPassword, setControlPassword] = useState('')\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault()\r\n        const terms = document.getElementById('terms')\r\n        const pseudoError = document.querySelector('.pseudo.error')\r\n        const emailError = document.querySelector('.email.error')\r\n        const passwordError = document.querySelector('.password.error')\r\n        const controlPasswordError = document.querySelector('.controlPassword.error')\r\n        const termsError = document.querySelector('.terms.error')\r\n\r\n        controlPasswordError.innerHTML = \"\";\r\n        termsError.innerHTML = \"\";\r\n\r\n        if (password !== controlPassword || !terms.checked) {\r\n            if (password !== controlPassword)\r\n                controlPasswordError.innerHTML = \"Les mots de passe ne correspondent pas\";\r\n            if (!terms.checked)\r\n                termsError.innerHTML = \"Veuillez valider les conditions générales\";\r\n        } else {\r\n            await axios({\r\n                method: \"post\",\r\n                url: `${process.env.REACT_APP_API_URL}api/user/register`,\r\n                data: {\r\n                    pseudo,\r\n                    email,\r\n                    password\r\n                }\r\n            })\r\n                .then((res) => {\r\n                    console.log(res)\r\n                    if (res.data.errors) {\r\n                        pseudoError.innerHTML = res.data.errors.pseudo\r\n                        emailError.innerHTML = res.data.errors.email\r\n                        passwordError.innerHTML = res.data.errors.password\r\n                    } else {\r\n                        setFormSubmit(true)\r\n                    }\r\n                })\r\n                .catch((err) => console.log(err))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {formSubmit ? (\r\n                <>\r\n                    <SignInForm />\r\n                    <span></span>\r\n                    <h4 className=\"success\">\r\n                        Enregistrement réussi, veuillez vous connecter\r\n                        </h4>\r\n                </>\r\n            ) : (\r\n                    <form action=\"\" onSubmit={handleRegister} id=\"sign-up-form\">\r\n                        <label htmlFor=\"pseudo\">Pseudo</label>\r\n                        <br />\r\n                        <input type=\"text\" name=\"pseudo\" id=\"pseudo\" onChange={(e) => setPseudo(e.target.value)} value={pseudo} />\r\n                        <div className=\"pseudo error\"></div>\r\n                        <br />\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <br />\r\n                        <input type=\"text\" name=\"email\" id=\"email\" onChange={(e) => setEmail(e.target.value)} value={email} />\r\n                        <div className=\"email error\"></div>\r\n                        <br />\r\n                        <label htmlFor=\"password\">Mot de passe</label>\r\n                        <br />\r\n                        <input type=\"password\" name=\"password\" id=\"password\" onChange={(e) => setPassword(e.target.value)} value={password} />\r\n                        <div className=\"password error\"></div>\r\n                        <br />\r\n                        <label htmlFor=\"controlPassword\">Confirmer mot de passe</label>\r\n                        <br />\r\n                        <input type=\"password\" name=\"controlPassword\" id=\"controlPassword\" onChange={(e) => setControlPassword(e.target.value)} value={controlPassword} />\r\n                        <div className=\"controlPassword error\"></div>\r\n                        <br />\r\n                        <input type=\"checkbox\" id=\"terms\" />\r\n                        <label htmlFor=\"terms\">J'accepte les <a href=\"#\" target=\"_blanck\" rel=\"noopener noreferrer\">Conditions Générales</a></label>\r\n                        <div className=\"terms error\"></div>\r\n                        <br />\r\n                        <input type=\"submit\" value=\"Valider inscription\" />\r\n                    </form>\r\n                )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SignUpForm;","import React, { useState } from 'react';\r\nimport SignInForm from './SignInForm';\r\nimport SignUpForm from './SignUpForm';\r\n\r\n\r\nconst Log = (props) => {\r\n    const [signUpModal, setSignUpModal] = useState(props.signup);\r\n    const [signInModal, setSignInModal] = useState(props.signin);\r\n\r\n    const handleModals = (e) => {\r\n        if (e.target.id === \"register\") {\r\n            setSignInModal(false);\r\n            setSignUpModal(true);\r\n        } else if (e.target.id === \"login\") {\r\n            setSignUpModal(false);\r\n            setSignInModal(true);\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <div className=\"connection-form\">\r\n                <div className=\"form-container\">\r\n                    <ul>\r\n                        <li onClick={handleModals} id=\"register\" className={signUpModal ? \"active-btn\" : null}>S'inscrire</li>\r\n                        <li onClick={handleModals} id=\"login\" className={signInModal ? \"active-btn\" : null}>Se connecter</li>\r\n                    </ul>\r\n                    {signUpModal && <SignUpForm />}\r\n                    {signInModal && <SignInForm />}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Log;","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { getTrends } from \"../actions/post.actions\";\r\nimport { isEmpty } from \"./utils\";\r\n\r\nconst Trends = () => {\r\n  const posts = useSelector((state) => state.allPostsReducer);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const trendList = useSelector((state) => state.trendingReducer);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(posts[0])) {\r\n      const postsArr = Object.keys(posts).map((i) => posts[i]);\r\n      let sortedArray = postsArr.sort((a, b) => {\r\n        return b.likers.length - a.likers.length;\r\n      });\r\n      sortedArray.length = 3;\r\n      dispatch(getTrends(sortedArray));\r\n    }\r\n  }, [posts]);\r\n\r\n  return (\r\n    <div className=\"trending-container\">\r\n      <h4>Trending</h4>\r\n      <NavLink exact to=\"/trending\">\r\n        <ul>\r\n          {trendList.length &&\r\n            trendList.map((post) => {\r\n              return (\r\n                <li key={post._id}>\r\n                  <div>\r\n                    {post.picture && <img src={post.picture} alt=\"post-pic\" />}\r\n                    {post.video && (\r\n                      <iframe\r\n                        width=\"500\"\r\n                        height=\"300\"\r\n                        src={post.video}\r\n                        frameBorder=\"0\"\r\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                        allowFullScreen\r\n                        title={post._id}\r\n                      ></iframe>\r\n                    )}\r\n                    {isEmpty(post.picture) && isEmpty(post.video) && (\r\n                      <img\r\n                        src={\r\n                          usersData[0] &&\r\n                          usersData\r\n                            .map((user) => {\r\n                              if (user._id === post.posterId) {\r\n                                return user.picture;\r\n                              } else return null;\r\n                            })\r\n                            .join(\"\")\r\n                        }\r\n                        alt=\"profil-pic\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"trend-content\">\r\n                      <p>{post.message}</p>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })}\r\n        </ul>\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Trends;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { isEmpty } from \"../utils\";\r\nimport FollowHandler from \"./FollowHandler\";\r\n\r\nconst FriendsHint = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [playOnce, setPlayOnce] = useState(true);\r\n  const [friendsHint, setFriendsHint] = useState([]);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const userData = useSelector((state) => state.userReducer);\r\n\r\n  const notFriendList = () => {\r\n    let array = [];\r\n    usersData.map((user) => {\r\n      if (user._id !== userData._id && !user.followers.includes(userData._id))\r\n        return array.push(user._id);\r\n    });\r\n    array.sort(() => 0.5 - Math.random());\r\n    if(window.innerHeight > 780) {\r\n        array.length = 5\r\n    } else if (window.innerHeight > 720) {\r\n        array.length = 4\r\n    } else if (window.innerHeight > 615) {\r\n        array.length = 3\r\n    } else if (window.innerHeight > 500) {\r\n        array.length = 2\r\n    } else if (window.innerHeight > 450) {\r\n        array.length = 2\r\n    } else if (window.innerHeight > 300) {\r\n        array.length = 1\r\n    }\r\n    setFriendsHint(array);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (playOnce && !isEmpty(usersData[0]) && !isEmpty(userData._id)) {\r\n      notFriendList();\r\n      setIsLoading(false);\r\n      setPlayOnce(false);\r\n    }\r\n  }, [userData, usersData, playOnce]);\r\n\r\n  return (\r\n    <div className=\"get-friends-container\">\r\n      <h4>Suggestions</h4>\r\n      {isLoading ? (\r\n        <div className=\"icon\">\r\n          <i className=\"fas fa-spinner fa-pulse\" />\r\n        </div>\r\n      ) : (\r\n        <ul>\r\n          {friendsHint &&\r\n            friendsHint.map((user) => {\r\n              for (let i = 0; i < usersData.length; i++) {\r\n                if (user === usersData[i]._id) {\r\n                  <li className=\"user-hint\" key={user}>\r\n                    <img src={usersData[i].picture} alt=\"user-pic\" />\r\n                    <p>{usersData[i].pseudo}</p>\r\n                    <FollowHandler\r\n                      idToFollow={usersData[i]._id}\r\n                      type={\"suggestion\"}\r\n                    />\r\n                  </li>;\r\n                }\r\n              }\r\n            })}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FriendsHint;\r\n","import React, { useContext } from 'react'\r\nimport { UidContext } from '../components/AppContext';\r\nimport LeftNav from '../components/LeftNav'\r\nimport NewPostForm from '../components/Posts/NewPostForm';\r\nimport Thread from '../components/Thread'\r\nimport Log from '../components/log'\r\nimport Trends from '../components/Trends';\r\nimport FriendsHint from '../components/Profil/FriendsHint';\r\n\r\n\r\nconst Home = () => {\r\n  const uid = useContext(UidContext)\r\n  \r\n  return (\r\n    <div className=\"home\">\r\n        <LeftNav />\r\n        <div className=\"main\">\r\n          <div className=\"home-header\">\r\n            {uid ? <NewPostForm /> : <Log signin={true} signup={false} />}\r\n          </div>\r\n          <Thread />\r\n        </div>\r\n        <div className=\"right-side\">\r\n          <div className=\"right-side-container\">\r\n            <div className=\"wrapper\">\r\n              <Trends/>\r\n              {uid && <FriendsHint />}\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { uploadPicture } from \"../../actions/user.actions\";\r\n\r\nconst UploadImg = () => {\r\n  const [file, setFile] = useState();\r\n  const dispatch = useDispatch();\r\n  const userData = useSelector((state) => state.userReducer);\r\n\r\n  const handlePicture = (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n    data.append(\"name\", userData.pseudo);\r\n    data.append(\"userId\", userData._id);\r\n    data.append(\"file\", file);\r\n\r\n    dispatch(uploadPicture(data, userData._id));\r\n  };\r\n\r\n  return (\r\n    <form action=\"\" onSubmit={handlePicture} className=\"upload-pic\">\r\n      <label htmlFor=\"file\">Changer d'image</label>\r\n      <input\r\n        type=\"file\"\r\n        id=\"file\"\r\n        name=\"file\"\r\n        accept=\".jpg, .jpeg, .png\"\r\n        onChange={(e) => setFile(e.target.files[0])}\r\n      />\r\n      <br />\r\n      <input type=\"submit\" value=\"Envoyer\" />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default UploadImg;\r\n","import React, { useState } from \"react\";\r\nimport LeftNav from \"../LeftNav\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport UploadImg from \"./UploadImg\";\r\nimport { updateBio } from \"../../actions/user.actions\";\r\nimport { dateParser } from \"../utils\";\r\nimport FollowHandler from \"./FollowHandler\";\r\n\r\nconst UpdateProfil = () => {\r\n  const [bio, setBio] = useState(\"\");\r\n  const [updateForm, setUpdateForm] = useState(false);\r\n  const userData = useSelector((state) => state.userReducer);\r\n  const usersData = useSelector((state) => state.usersReducer);\r\n  const error = useSelector((state) => state.errorReducer.userError)\r\n  const dispatch = useDispatch();\r\n  const [followingPopup, setFollowingPopup] = useState(false);\r\n  const [followersPopup, setFollowersPopup] = useState(false);\r\n\r\n  const handleUpdate = () => {\r\n    dispatch(updateBio(userData._id, bio));\r\n    setUpdateForm(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"profil-container\">\r\n        <LeftNav />\r\n        <h1> Profil de {userData.pseudo}</h1>\r\n        <div className=\"update-container\">\r\n          <div className=\"left-part\">\r\n            <h3>Photo de profil</h3>\r\n            <img src={userData.picture} alt=\"user\" />\r\n            <UploadImg />\r\n            <p>{error.format}</p>\r\n            <p>{error.maxSize}</p>\r\n          </div>\r\n          <div className=\"right-part\">\r\n            <div className=\"bio-update\">\r\n              <h3>Bio</h3>\r\n              {updateForm === false && (\r\n                <>\r\n                  <p onClick={() => setUpdateForm(!updateForm)}>\r\n                    {userData.bio}\r\n                  </p>\r\n                  <button onClick={() => setUpdateForm(!updateForm)}>\r\n                    Modifier bio\r\n                  </button>\r\n                </>\r\n              )}\r\n              {updateForm && (\r\n                <>\r\n                  <textarea\r\n                    type=\"text\"\r\n                    defaultValue={userData.bio}\r\n                    onChange={(e) => setBio(e.target.value)}\r\n                  ></textarea>\r\n                  <button onClick={handleUpdate}>Valider modification</button>\r\n                </>\r\n              )}\r\n            </div>\r\n            <h4>Membre depuis le : {dateParser(userData.createdAt)} </h4>\r\n            <h5 onClick={() => setFollowingPopup(true)}>\r\n              Abonnements :{\" \"}\r\n              {userData.following ? userData.following.length : \"\"}\r\n            </h5>\r\n            <h5 onClick={() => setFollowersPopup(true)}>\r\n              Abonnés : {userData.followers ? userData.followers.length : \"\"}\r\n            </h5>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {followingPopup && (\r\n        <div className=\"popup-profil-container\">\r\n          <div className=\"modal\">\r\n            <h3>Abonnements</h3>\r\n            <span className=\"cross\" onClick={() => setFollowingPopup(false)}>\r\n              &#10005;\r\n            </span>\r\n            <ul>\r\n              {usersData.map((user) => {\r\n                for (let i = 0; i < userData.following.length; i++) {\r\n                  if (user._id === userData.following[i]) {\r\n                    return (\r\n                      <li key={user._id}>\r\n                        <img src={user.picture} alt=\"user-pic\" />\r\n                        <h4>{user.pseudo}</h4>\r\n                        <div className=\"follow-handler\">\r\n                          <FollowHandler idToFollow={user._id} type={\"suggestion\"} />\r\n                        </div>\r\n                      </li>\r\n                    );\r\n                  } else return null\r\n                }\r\n              })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {followersPopup && (\r\n        <div className=\"popup-profil-container\">\r\n          <div className=\"modal\">\r\n            <h3>Abonnés</h3>\r\n            <span className=\"cross\" onClick={() => setFollowersPopup(false)}>\r\n              &#10005;\r\n            </span>\r\n            <ul>\r\n              {usersData.map((user) => {\r\n                for (let i = 0; i < userData.followers.length; i++) {\r\n                  if (user._id === userData.followers[i]) {\r\n                    return (\r\n                      <li key={user._id}>\r\n                        <img src={user.picture} alt=\"user-pic\" />\r\n                        <h4>{user.pseudo}</h4>\r\n                        <div className=\"follow-handler\">\r\n                          <FollowHandler idToFollow={user._id} type={\"suggestion\"} />\r\n                        </div>\r\n                      </li>\r\n                    );\r\n                  }\r\n                }\r\n              })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateProfil;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Card from '../Posts/Card';\r\nimport { isEmpty } from '../utils';\r\n\r\nconst ShowProfil = () => {\r\n    const posts = useSelector((state) => state.postReducer);\r\n    return (\r\n      <div className=\"main\">\r\n        <div className=\"thread-container\">\r\n        <ul>\r\n          {!isEmpty(posts[0]) &&\r\n            posts.map((post) => {\r\n              return <Card post={post} key={post._id} />;\r\n            })}\r\n        </ul>\r\n      </div></div>\r\n    );\r\n};\r\n\r\nexport default ShowProfil;","import React, { useContext } from 'react'\r\nimport Log from '../components/log'\r\nimport { UidContext } from '../components/AppContext'\r\nimport UpdateProfil from '../components/Profil/UpdateProfil';\r\nimport ShowProfil from '../components/Profil/ShowProfil';\r\nimport Trends from '../components/Trends';\r\n\r\nconst Profil = () => {\r\n  const uid = useContext(UidContext)\r\n\r\n  return (\r\n    <div className=\"profil-page\">\r\n      {uid ? <UpdateProfil /> : (   \r\n          <div className=\"log-container\">\r\n            <Log signin={false} signup={true} />\r\n            <div className=\"img-container\">\r\n              <img src=\"./img/log.svg\" alt=\"\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <ShowProfil />\r\n        <div className=\"wrapper\">\r\n        <Trends/></div>\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default Profil;","import React, { useContext } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { UidContext } from '../components/AppContext';\r\nimport LeftNav from '../components/LeftNav';\r\nimport Card from '../components/Posts/Card';\r\nimport FriendsHint from '../components/Profil/FriendsHint';\r\nimport Trends from '../components/Trends';\r\nimport { isEmpty } from '../components/utils';\r\n\r\nconst Trending = () => {\r\n  const uid = useContext(UidContext)\r\n  const trendList = useSelector((state) => state.trendingReducer)\r\n\r\n  return (\r\n    <div className=\"trending-page\">\r\n      <LeftNav />\r\n      <div className=\"main\">\r\n        <ul>\r\n          {!isEmpty(trendList[0]) && trendList.map((post) => <Card post={post} key={post._id} />)}\r\n        </ul>\r\n      </div>\r\n      <div className=\"right-side\">\r\n        {uid && <FriendsHint />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Trending;","import React from 'react';\r\nimport axios from 'axios'\r\nimport cookie from 'js-cookie'\r\n\r\nconst logout = () => {\r\n    const removeCookie = (key) => {\r\n        if (window !== 'undefined') {\r\n            cookie.remove(key, { expire: 1 })\r\n        }\r\n    }\r\n\r\n    const logout = async () => {\r\n        await axios({\r\n            method: \"get\",\r\n            url: `${process.env.REACT_APP_API_URL}api/user/logout`,\r\n            withCredentials: true\r\n        })\r\n            .then(() => removeCookie('jwt'))\r\n            .catch((err) => console.log(err))\r\n\r\n            window.location = \"/\";\r\n            \r\n    }\r\n\r\n    return (\r\n        <li onClick={logout}>\r\n            <img src=\"./img/icons/logout.svg\" alt=\"icon logout\" />\r\n        </li>\r\n    );\r\n};\r\n\r\nexport default logout;","import React, { useContext } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom'\r\nimport { UidContext } from './AppContext';\r\nimport Logout from './log/logout';\r\n\r\nconst Navbar = () => {\r\n    const uid = useContext(UidContext)\r\n\r\n\r\n    const userData = useSelector((state) => state.userReducer)\r\n\r\n\r\n    return (\r\n        <nav>\r\n            <div className=\"nav-container\">\r\n                <div className=\"logo\">\r\n                    <NavLink exact to=\"/\">\r\n                        <div className=\"logo\">\r\n                            <img src=\"./img/icon.png\" alt=\"icon\" />\r\n                            <h3>Raccoont</h3>\r\n                        </div>\r\n                    </NavLink>\r\n                </div>\r\n                {uid ? (\r\n                    <ul>\r\n                        <li></li>\r\n                        <li className=\"welcome\">\r\n                            <NavLink exact to=\"/profil\">\r\n                                <h5>Bienvenue {userData.pseudo}</h5>\r\n                            </NavLink>\r\n                        </li>\r\n                        <Logout />\r\n                    </ul>\r\n                ) : (\r\n                        <ul>\r\n                            <li></li>\r\n                            <li>\r\n                                <NavLink exact to=\"/profil\">\r\n                                    <img src=\"./img/icons/login.svg\" alt=\"login\" />\r\n                                </NavLink>\r\n                            </li>\r\n                        </ul>\r\n                    )\r\n                }\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default Navbar;","import React from 'react'\r\nimport { BrowserRouter as Router, Redirect, Switch, Route } from 'react-router-dom'\r\nimport Home from '../../pages/Home';\r\nimport Profil from '../../pages/Profil';\r\nimport Trending from '../../pages/Trending';\r\nimport Navbar from '../Navbar';\r\n\r\nconst index = () => {\r\n  return (\r\n    <div>\r\n      \r\n      <Router>\r\n        <Navbar />\r\n          <Switch>\r\n              <Route path=\"/\" exact component={Home} />\r\n              <Route path=\"/profil\" exact component={Profil} />\r\n              <Route path=\"/trending\" exact component={Trending} />\r\n              <Redirect to =\"/\" />\r\n          </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default index;","import React, { useState, useEffect } from 'react'\nimport Routes from './components/routes'\nimport { UidContext } from \"./components/AppContext\"\nimport axios from 'axios'\nimport { useDispatch } from 'react-redux'\nimport { getUser } from './actions/user.actions'\n\nconst App = () => {\n  const [uid, setUid] = useState(null);\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    const fetchToken = async() => {\n      await axios({\n        method: \"get\",\n        url: `${process.env.REACT_APP_API_URL}jwtid`,\n        withCredentials: true\n      })\n        .then((res) => {\n          setUid(res.data)\n        })\n        .catch((err) => console.log(\"no token\"))\n      };\n      fetchToken();\n\n      if (uid) dispatch(getUser(uid))\n  }, [uid, dispatch])\n\n  return (\n    <UidContext.Provider value={uid}>\n      <Routes />\n    </UidContext.Provider>\n  );\n};\n\nexport default App;","import {\r\n  FOLLOW_USER,\r\n  GET_USER,\r\n  UNFOLLOW_USER,\r\n  UPDATE_BIO,\r\n  UPLOAD_PICTURE,\r\n} from \"../actions/user.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function userReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_USER:\r\n      return action.payload;\r\n    case UPLOAD_PICTURE:\r\n      return {\r\n        ...state,\r\n        picture: action.payload,\r\n      };\r\n    case UPDATE_BIO:\r\n      return {\r\n        ...state,\r\n        bio: action.payload,\r\n      };\r\n    case FOLLOW_USER:\r\n      return {\r\n        ...state,\r\n        following: [action.payload.idToFollow, ...state.following],\r\n      };\r\n    case UNFOLLOW_USER:\r\n      return {\r\n        ...state,\r\n        following: state.following.filter((id) => id !== action.payload.idToUnfollow),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import axios from \"axios\";\r\n\r\nexport const GET_USERS = \"GET_USERS\";\r\n\r\nexport const getUsers = () => {\r\n  return (dispatch) => {\r\n    return axios\r\n      .get(`${process.env.REACT_APP_API_URL}api/user`)\r\n      .then((res) => {\r\n        dispatch({ type: GET_USERS, payload: res.data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n","import { GET_USERS } from \"../actions/users.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function usersReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_USERS:\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  DELETE_COMMENT,\r\n  DELETE_POST,\r\n  EDIT_COMMENT,\r\n  GET_POSTS,\r\n  LIKE_POST,\r\n  UNLIKE_POST,\r\n  UPDATE_POST,\r\n} from \"../actions/post.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function postReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_POSTS:\r\n      return action.payload;\r\n\r\n    case LIKE_POST:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            likers: [action.payload.userId, ...post.likers],\r\n          };\r\n        }\r\n        return post;\r\n      });\r\n\r\n    case UNLIKE_POST:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            likers: post.likers.filter((id) => id !== action.payload.userId),\r\n          };\r\n        }\r\n        return post;\r\n      });\r\n\r\n    case UPDATE_POST:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            message: action.payload.message,\r\n          };\r\n        }\r\n        return post;\r\n      });\r\n\r\n    case DELETE_POST:\r\n      return state.filter((post) => post._id !== action.payload.postId);\r\n\r\n    case EDIT_COMMENT:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            comments: post.comments.map((comment) => {\r\n              if (comment._id === action.payload.commentId) {\r\n                return {\r\n                  ...comment,\r\n                  text: action.payload.text,\r\n                };\r\n              } else {\r\n                return comment;\r\n              }\r\n            }),\r\n          };\r\n        } else return post;\r\n      });\r\n\r\n    case DELETE_COMMENT:\r\n      return state.map((post) => {\r\n        if (post._id === action.payload.postId) {\r\n          return {\r\n            ...post,\r\n            comments: post.comments.filter(\r\n              (comment) => comment._id !== action.payload.commentId\r\n            ),\r\n          };\r\n        } else {\r\n          return post;\r\n        }\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { GET_POST_ERRORS } from \"../actions/post.actions\";\r\nimport { GET_USER_ERRORS } from \"../actions/user.actions\";\r\n\r\nconst initialState = { userError: [], postError: [] };\r\n\r\nexport default function errorReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_POST_ERRORS:\r\n      return {\r\n        postError: action.payload,\r\n        userError: []\r\n      };\r\n      case GET_USER_ERRORS:\r\n          return {\r\n              userError: action.payload,\r\n              postError: []\r\n          }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { GET_ALL_POSTS } from \"../actions/post.actions\";\r\n\r\nconst initialState = {}\r\n\r\nexport default function allPostsReducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case GET_ALL_POSTS:\r\n            return action.payload\r\n            default:\r\n                return state;\r\n    }\r\n}","import { GET_TRENDS } from \"../actions/post.actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport default function trendingReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case GET_TRENDS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducer, combineReducers } from 'redux'\r\nimport userReducer from './user.reducer'\r\nimport usersReducer from './users.reducer'\r\nimport postReducer from './post.reducer'\r\nimport errorReducer from './error.reducer'\r\nimport allPostsReducer from './allPosts.reducer'\r\nimport trendingReducer from './trending.reducer'\r\n\r\nexport default combineReducers({\r\n    userReducer,\r\n    usersReducer,\r\n    postReducer,\r\n    errorReducer,\r\n    allPostsReducer,\r\n    trendingReducer\r\n})\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/index.scss';\nimport { Provider } from 'react-redux'\nimport { applyMiddleware, createStore } from 'redux';\nimport thunk from 'redux-thunk'\nimport rootReducer from './reducers'\nimport { getUsers } from './actions/users.actions'\n// dev tools\nimport logger from 'redux-logger'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { getPosts } from './actions/post.actions';\n\n\nconst store = createStore(\n  rootReducer, composeWithDevTools(applyMiddleware(thunk, logger))\n)\n\nstore.dispatch(getUsers());\nstore.dispatch(getPosts())\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n    </Provider>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}